import{r as N,c as _,b as n,d as s,t as d,F as x,e as h,q as B,g as a,v as i,s as v,w as V,u as E,o as m}from"./index-DXwcSwxi.js";import{a as I}from"./orderService-CEplCYPY.js";import{g as M}from"./cartService-CfKSr7b5.js";const S={class:"container"},U={class:"row g-5"},L={class:"col-md-5 align-middle me-2"},F={class:"mb-3"},P={class:"badge bg-primary rounded-pill align-middle"},j={class:"items list-group mb-3"},C={class:"p-3 list-group-item d-flex justify-content-between"},D={class:"my-0"},O={class:"text-muted"},R={class:"border p-4 light h5 rounded text-center total-price"},T={class:"col-md-7 col-lg-8"},$={class:"row g-3"},q={class:"col-12"},z={class:"col-12 pt-1"},A={class:"my-3"},G={class:"form-check"},H={class:"form-check"},J={key:0,class:"pt-1"},Y={__name:"OrderForm",setup(K){const g=E(),e=N({items:[],form:{name:"",address:"",payment:"card",cardNumber:""}}),u=_(()=>{let r=0;return e.items.forEach(t=>{r+=t.price-t.price*t.discountPer/100}),r}),w=async()=>{var t,o,c,p,f,b,y;if((t=e.form.name)!=null&&t.trim())if((c=e.form.address)!=null&&c.trim()){if(e.form.payment==="card")if((f=e.form.cardNumber)!=null&&f.trim()){if(!/^\d{1,16}$/.test(e.form.cardNumber)){window.alert("카드 번호는 16자 이하의 숫자로만 입력해주세요"),(y=document.getElementById("cardNum"))==null||y.focus();return}}else{window.alert("카드 번호를 입력해주세요."),(b=document.getElementById("cardNum"))==null||b.focus();return}}else{window.alert("주소를 입력해주세요"),(p=document.getElementById("address"))==null||p.focus();return}else{window.alert("이름을 입력해주세요"),(o=document.getElementById("name"))==null||o.focus();return}if(e.form.payment!=="card"&&(e.form.cardNumber=""),e.form.itemIds=e.items.map(l=>l.id),(await I(e.form)).status===200){const l=["주문이 완료되었습니다."];if(e.form.payment==="bank"){const k=u.value.toLocaleString();l.push(`한국은행 123-456789-777 계좌로 ${k}원을 입금해주시기 바랍니다.`)}window.alert(l.join(`
`)),await g.push("/")}};return async function(){const t=await M();t.status===200&&(e.items=t.data)}(),(r,t)=>(m(),n("form",{class:"order-form",onSubmit:V(w,["prevent"])},[s("div",S,[t[15]||(t[15]=s("div",{class:"py-5 text-container"},[s("div",{class:"h4"},[s("b",null,"주문하기")]),s("p",{class:"h6 font-lg mt-3"},"주문 내역을 확인하시고 주문하기 버튼을 클릭해주세요")],-1)),s("div",U,[s("div",L,[s("div",F,[t[5]||(t[5]=s("span",{class:"h5 mb-3 align-middle me-2"},[s("b",null,"구입 목록")],-1)),s("span",P,d(e.items.length),1)]),s("ul",j,[(m(!0),n(x,null,h(e.items,o=>(m(),n("li",C,[s("div",null,[s("h6",D,d(o.name),1)]),s("span",O,d((o.price-o.price*o.discountPer/100).toLocaleString())+"원 ",1)]))),256))]),s("div",R,[t[6]||(t[6]=s("span",null,"합계",-1)),s("b",null,d(u.value.toLocaleString())+"원",1)]),t[7]||(t[7]=s("button",{type:"submit",class:"w-100 btn btn-primary py-4 mt-4"},"결제하기",-1))]),s("div",T,[t[13]||(t[13]=s("div",{class:"h5 mb-3"},[s("b",null,"주문자 정보")],-1)),s("div",$,[s("div",q,[t[8]||(t[8]=s("label",{for:"name",class:"form-label"},"이름",-1)),a(s("input",{type:"text",class:"form-control p-3",id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>e.form.name=o)},null,512),[[i,e.form.name]])]),s("div",z,[t[9]||(t[9]=s("label",{for:"address",class:"form-label"},"주소",-1)),a(s("input",{type:"text",class:"form-control p-3",id:"address","onUpdate:modelValue":t[1]||(t[1]=o=>e.form.address=o)},null,512),[[i,e.form.address]])])]),t[14]||(t[14]=s("div",{class:"h5 mt-5 mb-3"},[s("b",null,"결제 수단")],-1)),s("div",A,[s("div",G,[a(s("input",{id:"card",name:"paymentMethod",type:"radio",class:"form-check-input",value:"card","onUpdate:modelValue":t[2]||(t[2]=o=>e.form.payment=o)},null,512),[[v,e.form.payment]]),t[10]||(t[10]=s("label",{class:"form-check-label",for:"card"},"신용카드",-1))]),s("div",H,[a(s("input",{id:"bank",name:"paymentMethod",type:"radio",class:"form-check-input",value:"bank","onUpdate:modelValue":t[3]||(t[3]=o=>e.form.payment=o)},null,512),[[v,e.form.payment]]),t[11]||(t[11]=s("label",{class:"form-check-label",for:"bank"},"무통장 입금",-1))])]),e.form.payment==="card"?(m(),n("div",J,[t[12]||(t[12]=s("label",{for:"cardNum",class:"form-label"},"카드 번호",-1)),a(s("input",{type:"text",class:"form-control p-3",id:"cardNum","onUpdate:modelValue":t[4]||(t[4]=o=>e.form.cardNumber=o)},null,512),[[i,e.form.cardNumber]])])):B("",!0)])])])],32))}};export{Y as default};
